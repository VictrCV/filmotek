{% extends 'base.html.twig' %}
{% block body %}
    {{ parent() }}
    <div class="container mt-5 pt-5 color-text">
        <div class="row">
            <div class="col-4">
                <img src="{{ series.imageUrl }}" class="cover-large pe-3">
            </div>
            <div class="col-8">
                <h1 class="text-center pb-5">{{ series.title }}</h1>
                {% if (app.session.get('jwt') != null) %}
                    {% if (app.request.attributes.get('_route_params')['list'] == 'in_progress') %}
                        {{ form_start(temporaryMarksForm) }}
                        <div class="row justify-content-center align-items-end mb-5">
                            {% if not series.isFilm %}
                                <div class="col-2">
                                    {{ form_row(temporaryMarksForm.season, {'value': seriesList.season}) }}
                                </div>
                                <div class="col-2">
                                    {{ form_row(temporaryMarksForm.episode, {'value': seriesList.episode}) }}
                                </div>
                            {% endif %}
                            <div class="col-3">
                                {{ form_row(temporaryMarksForm.time, {'value': seriesList.time}) }}
                            </div>
                            <div class="col-2">
                                {{ form_row(temporaryMarksForm.save) }}
                            </div>
                        </div>
                        {{ form_end(temporaryMarksForm) }}
                    {% endif %}
                    <div class="row mb-4">
                        {% if inFavourites == false %}
                            <div class="col-3">
                                <a class="btn btn-form" role="button"
                                   href="{{ path('series_list_post', {
                                       'list': app.request.attributes.get('_route_params')['list'],
                                       'type': 'favourites',
                                       'apiId': series.apiId}) }}">
                                    Add to "Favourites"
                                </a>
                            </div>
                        {% endif %}
                        {% if inIncompatibleList == false %}
                            <div class="col-3">
                                <a class="btn btn-form" role="button"
                                   href="{{ path('series_list_post', {
                                       'list': app.request.attributes.get('_route_params')['list'],
                                       'type': 'toWatch',
                                       'apiId': series.apiId}) }}">
                                    Add to "To watch"
                                </a>
                            </div>
                            <div class="col-3">
                                <a class="btn btn-form" role="button"
                                   href="{{ path('series_list_post', {
                                       'list': app.request.attributes.get('_route_params')['list'],
                                       'type': 'inProgress',
                                       'apiId': series.apiId}) }}">
                                    Add to "In progress"
                                </a>
                            </div>
                        {% endif %}
                        {% if app.request.attributes.get('_route_params')['list'] == 'to_watch' %}
                            <div class="col-3">
                                <a class="btn btn-form" role="button"
                                   href="{{ path('series_list_start_watching', {
                                       'list': app.request.attributes.get('_route_params')['list'],
                                       'apiId': series.apiId,
                                       'seriesListId': seriesList.id}) }}">
                                    Start watching
                                </a>
                            </div>
                        {% endif %}
                        {% if app.request.attributes.get('_route_params')['list'] != 'search' %}
                            <div class="col-3">
                                <a class="btn btn-form" role="button"
                                   href="{{ path('series_list_delete', {
                                       'list': app.request.attributes.get('_route_params')['list'],
                                       'apiId': series.apiId,
                                       'seriesListId': seriesList.id}) }}">
                                    Remove
                                </a>
                            </div>
                        {% endif %}
                    </div>
                {% endif %}
                <h2>Synopsis</h2>
                <p>{{ series.synopsis }}</p>
            </div>
        </div>
    </div>
{% endblock %}
{% block sectiontitle %}Series{% endblock %}